Confirm that you are able to execure the below command from host

ping chefnode
ping chefnode1


execute the command and confirm that the output is empty

knife node list




Bootstraping:
-------------------------
AWS
-----
knife bootstrap x.x.x.x --ssh-user ubuntu --sudo --identity-file ./.chef/mykey.pem
  
Non AWS
-----
  
knife bootstrap x.x.x.x --ssh-user ubuntu
  
once bootstrap is completed execute 

knife node list  

and confirm that you have the newly added machine avialable on the command promt
  
  

create a new cookbook by typing 

berks cookbook COOKBOOK_NAME (Make sure you are under chef-repo/cookbooks directory,which you created by downloading the starter kit)

open recipe/default.rb under the new cookbook folder in a notepad and add the below line

*****************

package 'apache2' do
action :install

end

******************

go to the cookbook directory theough CMD and execute the below commands

berks install

berks upload --no-freeze

confirm that new cookbook is uploaded to the server

Assign the cookbok to the node run list 

knife node run_list add chefnode1 'COOKBOOKNAME'

once added login to chefnode1 and execute the below commands

(make sure ypu ar logging using root ,once done with vagrant ssh you need to type su - ,enter root password and login)

chef-client --why-run

(Above command will just simulate execution)

chef-client

(Will execute the command)

confirm that cookbook is executed. 

Now go to your browser and access http://chefnode1 ,confirm that you are getting a web page,if note. do a 

vagrant ssh chefnode1   
sudo service apache2 restart
confirm that you are getting a web page (Please remmber that http by default listen pn port 80)


Once done go to the cookbook you created and copy blue.rb to the recipes directory

copy iamlocatedinthefiledirectory.txt to the files directory

execute the below commands

berks install

berks upload --no-freeze

knife node run_list add chefnode2 'COOKBOOKNAME::blue'

chef-client --why-run

(Above command will just simulate execution)

chef-client

(Will execute the command)


go to your browser and confirm that 

http://chefnode2:8080 takes you to the tomcat web page


and also a file  /tmp/comingfromblue.txt be present at the chefnode2


#Can you comeup with a plan to install jenkins using chf now? (hints: tomcat,jenkins.war)


Copy default.rb to the attributes directory

add the below lines to the existing cookbook
----
template '/vagrant/important.conf' do
  source 'sample_template.erb'
  owner 'root'
  group 'root'
  mode '0644'
end
---------------------

copy sample_template.erb to templates directory

execute the below commands

berks install

berks upload --no-freeze

chef-client

(Will execute the command)


